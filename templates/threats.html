{% extends "layout.html" %}
{% block body %}

<h3>All Threats</h3>
This list show all threats (mitigated and unmitigated) recorded in OpenISMS.
<table class="ui celled table">
<thead>
  <tr><th>Threat name</th><th>Threat score (0-10)</th><th>Mitigated?</th></tr>
</thead>
<tbody>
  {% for threat in threats|sort(attribute='score_risk', reverse = True) %}
  <tr><td>
     {{threat.threat_name}} in {{threat.process_name}}
  </td><td>
     {{threat.score_risk}}
  </td><td class="center aligned">
  {% if threat.is_controlled=="True" %} <i class="large green checkmark icon"> {% endif %}
  </td><tr>
  {% endfor %}
</tbody>
</table>
{% endblock %}




{#
9                     row['process_name'] = process['name']
210                     for threat_lib_item in data['threatlib']:
211                         if threat_lib_item['_id'] == threat[
212                                 'threat_lib_reference']:
213                             row['threat_name'] = threat_lib_item['name']
214                             row['threat_description'] = threat_lib_item[
215                                 'description']
216                     affected_assets_list = []
217                     for asset_id in threat['asset_ids']:
218                         for asset in process['assets']:
219                             if str(asset['_id']) == str(asset_id):
220                                 affected_assets_list.append(
221                                     str(asset['name']) + "\n")
222                     row['affected_assets'] = ''.join(affected_assets_list)
223                     row['score_impact'] = threat['score_impact']
224                     row['score_probability'] = threat['score_probability']
225                     row['score_risk'] = threat['score_risk']
226                     row['is_controlled'] = threat['is_controlled']
#}
